---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# MLVSBM

<!-- badges: start -->
[![Travis build status](https://travis-ci.org/Chabert-Liddell/MLVSBM.svg?branch=master)](https://travis-ci.org/Chabert-Liddell/MLVSBM)
  [![Codecov test coverage](https://codecov.io/gh/Chabert-Liddell/MLVSBM/branch/master/graph/badge.svg)](https://codecov.io/gh/Chabert-Liddell/MLVSBM?branch=master)
<!-- badges: end -->

The goal of MLVSBM is to ...

## Installation

You can install the released version of MLVSBM from [github](https://github.com) with:

``` r
devtools::install_github("Chabert-Liddell/MLVSBM")
```

## Example

This is a how to simulate a multilevel SBM network:

```{r simulate}
set.seed(1)
my_mlvsbm <- MLVSBM::mlvsbm_simulate_network(
  n = list(100, 50),
  Q = list(2, 2),
  pi = c(.5, .5),
  gamma = matrix(c(.8, .2, .1, .9), ncol = 2),
  alpha = list(matrix(c(.25, .1, .1, .25), nrow = 2, ncol = 2),
               matrix(c(.7, .4, .4, .1), nrow = 2, ncol = 2)),
  directed = list(FALSE, FALSE),
  affiliation = "preferential",
  no_empty_org = FALSE)
```

This is how to create a network from data:
```{r create}
lower_level <- my_mlvsbm$adjacency_matrix$I
upper_level <- my_mlvsbm$adjacency_matrix$O
affiliation <- my_mlvsbm$affiliation_matrix
my_mlvsbm2 <- MLVSBM::mlvsbm_create_network(X = list(lower_level, upper_level),
                                            A = affiliation)
```

And this is how to infer it:
```{r infer}
fit <- MLVSBM:::mlvsbm_estimate_network(my_mlvsbm)
```



```{r pressure, echo = FALSE}
plot(pressure)
```


